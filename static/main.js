(()=>{"use strict";var e={345:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.backButton=t.sortButton=void 0,t.changeRootBackward=function(){n.mainParameters.curRoot=function(e){let t=e.lastIndexOf("/");return t==e.length-1&&(t=e.slice(0,-1).lastIndexOf("/")),`${e.slice(0,t)}/`}(n.mainParameters.curRoot),(0,n.buildNewRequest)()},t.checkBackButton=function(){n.mainParameters.curRoot.length<=n.mainParameters.mainRoot.length?a&&(a.disabled=!0):a&&(a.disabled=!1)},t.changeSort=function(){"asc"==n.mainParameters.curSort?(n.mainParameters.curSort="desc",r&&(r.innerHTML="Сортировать по возрастанию")):(n.mainParameters.curSort="asc",r&&(r.innerHTML="Сортировать по убыванию")),(0,n.buildNewRequest)()};const n=o(708),r=document.getElementById("buttonSort");t.sortButton=r;const a=document.getElementById("buttonBack");t.backButton=a},966:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loaderOn=function(){const e=document.getElementById("tableJSON");e?(e.style.visibility="hidden",e.innerHTML="",(0,r.changeTableName)("Загрузка..."),n.sortButton&&(n.sortButton.disabled=!0),n.backButton&&(n.backButton.disabled=!0)):console.error("Элемент 'tableJSON' не найден.")},t.loaderOff=function(){const e=document.getElementById("tableJSON");e?(e.style.visibility="visible",n.sortButton&&(n.sortButton.disabled=!1),(0,n.checkBackButton)()):console.error("Элемент 'tableJSON' не найден.")};const n=o(345),r=o(697)},708:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mainParameters=void 0,t.buildNewRequest=function(){(0,n.loaderOn)();var e=`/fs?sort=${s.curSort}&root=${s.curRoot}`;fetch(e).then((e=>{if(!e.ok)throw new Error(`Ошибка HTTP ${e.status}`);return e.json()})).then((e=>{var t=e.ErrorCode;if(""===s.curRoot&&(s.mainRoot=e.Root),(0,r.checkBackButton)(),s.curRoot=e.Root,(0,a.changeTableName)(s.curRoot),0===t){var o=e.Data;(0,a.tableFromJSON)(o)}else c&&(c.textContent=`Ошибка выполнения запроса: ${e.ErrorMessage}`)})).catch((e=>{c&&(c.textContent="Ошибка во время выполнения запроса"),console.error("Ошибка fetch:",e)})),(0,n.loaderOff)()};const n=o(966),r=o(345),a=o(697),c=document.getElementById("mistakeMessage");let s={curSort:"asc",curRoot:"",mainRoot:""};t.mainParameters=s},697:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tableFromJSON=function(e){c(n.mainParameters.curRoot),a?(a.innerHTML="",e.forEach((e=>{let t=document.createElement("tr");"Дир"===e["Тип"]&&(t.className="color",t.classList.add("clickableRow"),t.onclick=function(){s(t)});let o=document.createElement("td");o.textContent=e["Тип"],t.appendChild(o);let n=document.createElement("td");n.textContent=e["Имя"],t.appendChild(n);let r=document.createElement("td");r.textContent=e["Размер"],t.appendChild(r),a.appendChild(t)}))):console.error("'tableJSON' не найден.")},t.changeRootForward=s,t.changeTableName=c;const n=o(708),r=document.getElementById("tableName"),a=document.getElementById("tableJSON");function c(e){r?r.textContent=e:console.error("'tableName' не найден.")}function s(e){n.mainParameters.curRoot=`${n.mainParameters.curRoot}${e.cells[1].innerText}/`,(0,n.buildNewRequest)()}}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}(()=>{const e=o(345),t=o(708);window.addEventListener("load",(function(){(0,t.buildNewRequest)(),e.backButton?e.backButton.addEventListener("click",e.changeRootBackward):console.error("Кнопка 'buttonBack' не найдена"),e.sortButton?e.sortButton.addEventListener("click",e.changeSort):console.error("Кнопка 'buttonSort' не найдена.")}))})()})();